<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grimório Digital - Perfil do Personagem</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --theme-bg: #0a0a0c;
            --theme-panel: #0f0f12;
            --theme-border: #2a2a2e;
            --theme-text: #e8e4dc;
            --theme-blue: #4a9eff;
            --theme-orange: #ff6b35;
            --theme-red: #dc2626;
            --theme-green: #22c55e;
            --theme-purple: #8b5cf6;
            --theme-yellow: #f59e0b;
            --theme-pink: #ec4899;
            --theme-gold: #d4a76a;
            --theme-copper: #8b7355;
            
            --card-bg: #1a1510;
            --card-border: #2a2318;
            --card-highlight: #d4a76a;
            
            --font-cinzel: 'Cinzel', serif;
            --font-sans: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, var(--theme-bg) 0%, #1e1b4b 100%);
            color: var(--theme-text);
            min-height: 100vh;
            font-family: var(--font-sans);
        }
        
        /* Layout Principal */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            min-height: 100vh;
        }
        
        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 2px solid var(--theme-orange);
            margin-bottom: 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--theme-orange);
        }
        
        .logo-text h1 {
            font-size: 1.75rem;
            background: linear-gradient(135deg, var(--theme-orange), #d946ef);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.25rem;
            font-family: var(--font-cinzel);
        }
        
        .logo-text p {
            color: var(--theme-text);
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
        }
        
        /* Grid Principal */
        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }
        
        /* Sidebar */
        .sidebar {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid var(--theme-border);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .nav-section {
            margin-bottom: 2rem;
        }
        
        .nav-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--theme-text);
            opacity: 0.6;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--theme-border);
            font-family: var(--font-cinzel);
        }
        
        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .nav-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 10px;
            color: var(--theme-text);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: var(--font-sans);
        }
        
        .nav-btn:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: var(--theme-purple);
            transform: translateX(5px);
        }
        
        .nav-btn.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--theme-purple);
        }
        
        /* Conteúdo Principal */
        .main-content {
            min-height: 100vh;
        }
        
        /* Cabeçalho do Perfil */
        .profile-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--theme-border);
        }
        
        .profile-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .profile-icon {
            font-size: 2.5rem;
            color: var(--theme-orange);
        }
        
        .profile-title h1 {
            font-size: 2rem;
            font-family: var(--font-cinzel);
            color: var(--theme-text);
        }
        
        .profile-subtitle {
            color: var(--theme-text);
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        /* Status do Perfil */
        .profile-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(34, 197, 94, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--theme-green);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Cards Principais */
        .character-card {
            background: linear-gradient(145deg, var(--card-bg), var(--card-border));
            border: 2px solid var(--card-highlight);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        
        .character-card:hover {
            border-color: var(--theme-gold);
            box-shadow: 0 8px 32px rgba(139, 115, 85, 0.2);
            transform: translateY(-2px);
        }
        
        /* Grid de Atributos */
        .attributes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .attribute-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--theme-border);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .attribute-card:hover {
            transform: translateY(-5px);
            border-color: var(--theme-blue);
            box-shadow: 0 5px 15px rgba(74, 158, 255, 0.2);
        }
        
        .attribute-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .attribute-value {
            font-size: 2.5rem;
            font-weight: bold;
            font-family: var(--font-mono);
            margin-bottom: 0.5rem;
        }
        
        .attribute-label {
            color: var(--theme-text);
            opacity: 0.7;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Barras de Progresso */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--theme-border);
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--theme-orange), var(--theme-yellow));
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Seção de Recursos */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .resource-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--theme-border);
            border-radius: 10px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .resource-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }
        
        .resource-vital::before { background: var(--theme-red); }
        .resource-energy::before { background: var(--theme-blue); }
        .resource-stamina::before { background: var(--theme-green); }
        
        /* Botões */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-family: var(--font-sans);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--theme-orange), #ff8b35);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--theme-purple);
            color: var(--theme-purple);
        }
        
        .btn-outline:hover {
            background: var(--theme-purple);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--theme-green), #16a34a);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--theme-red), #b91c1c);
            color: white;
        }
        
        /* Estatísticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid var(--theme-border);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--theme-purple), var(--theme-pink));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--theme-text);
            opacity: 0.7;
            font-size: 0.875rem;
        }
        
        /* Mascote */
        .mascote-card {
            background: linear-gradient(135deg, var(--card-bg), var(--card-border));
            border: 2px solid var(--theme-pink);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        /* Animações */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .anim-entry {
            animation: fadeInUp 0.6s ease-out forwards;
            opacity: 0;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        
        /* Responsividade */
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
                margin-bottom: 2rem;
            }
        }
        
        @media (max-width: 768px) {
            .app-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .header-actions {
                width: 100%;
                justify-content: center;
            }
            
            .profile-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .attributes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Utilitários */
        .text-center { text-align: center; }
        .text-muted { opacity: 0.7; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        
        /* Ícones de Atributos */
        .icon-forca { color: var(--theme-red); }
        .icon-destreza { color: var(--theme-green); }
        .icon-constituicao { color: var(--theme-yellow); }
        .icon-inteligencia { color: var(--theme-blue); }
        .icon-sabedoria { color: var(--theme-purple); }
        .icon-carisma { color: var(--theme-pink); }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-book-sparkles"></i>
                </div>
                <div class="logo-text">
                    <h1>Grimório Digital</h1>
                    <p>Perfil do Personagem</p>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="btn btn-outline" onclick="goToIndex()">
                    <i class="fas fa-home"></i>
                    Início
                </button>
                <button class="btn btn-primary" onclick="goToFicha()">
                    <i class="fas fa-edit"></i>
                    Editar Ficha
                </button>
            </div>
        </header>
        
        <div class="main-grid">
            <!-- Sidebar -->
            <aside class="sidebar anim-entry">
                <!-- Navegação -->
                <div class="nav-section">
                    <div class="nav-title">
                        <i class="fas fa-compass"></i>
                        Navegação
                    </div>
                    <nav class="nav-links">
                        <button class="nav-btn" onclick="goToIndex()">
                            <i class="fas fa-home"></i>
                            Painel Principal
                        </button>
                        <button class="nav-btn active">
                            <i class="fas fa-user-circle"></i>
                            Meu Perfil
                        </button>
                        <button class="nav-btn" onclick="goToFicha()">
                            <i class="fas fa-scroll"></i>
                            Ficha Completa
                        </button>
                        <button class="nav-btn" onclick="window.location.href='mascote.html'">
                            <i class="fas fa-paw"></i>
                            Meu Mascote
                        </button>
                    </nav>
                </div>
                
                <!-- Sistema de Save -->
                <div class="nav-section">
                    <div class="nav-title">
                        <i class="fas fa-save"></i>
                        Sistema de Save
                    </div>
                    <div class="nav-links">
                        <button class="nav-btn" onclick="saveProfile()">
                            <i class="fas fa-save"></i>
                            Salvar Perfil
                        </button>
                        <button class="nav-btn" onclick="exportProfile()">
                            <i class="fas fa-download"></i>
                            Exportar Perfil
                        </button>
                        <button class="nav-btn" onclick="loadProfile()">
                            <i class="fas fa-upload"></i>
                            Carregar Perfil
                        </button>
                    </div>
                </div>
                
                <!-- Informações do Personagem -->
                <div class="nav-section">
                    <div class="nav-title">
                        <i class="fas fa-info-circle"></i>
                        Informações
                    </div>
                    <div class="character-info-mini">
                        <div class="info-item">
                            <span class="text-muted">Nível:</span>
                            <span class="font-bold" id="mini-level">1</span>
                        </div>
                        <div class="info-item">
                            <span class="text-muted">Classe:</span>
                            <span class="font-bold" id="mini-class">-</span>
                        </div>
                        <div class="info-item">
                            <span class="text-muted">Raça:</span>
                            <span class="font-bold" id="mini-race">-</span>
                        </div>
                        <div class="info-item">
                            <span class="text-muted">XP:</span>
                            <span class="font-bold" id="mini-xp">0</span>
                        </div>
                    </div>
                </div>
            </aside>
            
            <!-- Conteúdo Principal -->
            <main class="main-content">
                <!-- Cabeçalho do Perfil -->
                <div class="profile-header anim-entry">
                    <div class="profile-title">
                        <div class="profile-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div>
                            <h1 id="profile-name">Carregando Perfil...</h1>
                            <p class="profile-subtitle" id="profile-desc">Status do personagem e progressão</p>
                        </div>
                    </div>
                    
                    <div class="profile-status">
                        <div class="status-indicator"></div>
                        <span id="profile-status-text">Perfil Ativo</span>
                    </div>
                </div>
                
                <!-- Card de Resumo do Personagem -->
                <section class="character-card anim-entry delay-1">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold">
                            <i class="fas fa-user-circle mr-2"></i>
                            Informações Básicas
                        </h2>
                        <button class="btn btn-outline btn-sm" onclick="goToFicha()">
                            <i class="fas fa-edit"></i>
                            Editar
                        </button>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-muted">Nome do Personagem</label>
                                <div class="text-2xl font-bold" id="display-nome">-</div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-sm text-muted">Raça</label>
                                    <div class="text-lg font-bold" id="display-raca">-</div>
                                </div>
                                <div>
                                    <label class="text-sm text-muted">Classe</label>
                                    <div class="text-lg font-bold text-orange-400" id="display-classe">-</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-gray-900/50 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm text-muted">Nível</span>
                                    <span class="text-2xl font-bold text-yellow-400" id="display-nivel">1</span>
                                </div>
                                
                                <div class="mb-2">
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Experiência</span>
                                        <span id="display-xp">0/1000</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="xp-bar"></div>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-muted">
                                    Próximo nível: <span id="next-level-xp">1000</span> XP
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Atributos Base -->
                <section class="anim-entry delay-2">
                    <h2 class="text-xl font-bold mb-4">
                        <i class="fas fa-chart-line mr-2"></i>
                        Atributos Base
                    </h2>
                    
                    <div class="attributes-grid">
                        <!-- Força -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-forca">
                                <i class="fas fa-fist-raised"></i>
                            </div>
                            <div class="attribute-value" id="display-forca">0</div>
                            <div class="attribute-label">Força</div>
                        </div>
                        
                        <!-- Destreza -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-destreza">
                                <i class="fas fa-running"></i>
                            </div>
                            <div class="attribute-value" id="display-destreza">0</div>
                            <div class="attribute-label">Destreza</div>
                        </div>
                        
                        <!-- Constituição -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-constituicao">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="attribute-value" id="display-constituicao">0</div>
                            <div class="attribute-label">Constituição</div>
                        </div>
                        
                        <!-- Inteligência -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-inteligencia">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="attribute-value" id="display-inteligencia">0</div>
                            <div class="attribute-label">Inteligência</div>
                        </div>
                        
                        <!-- Sabedoria -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-sabedoria">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="attribute-value" id="display-sabedoria">0</div>
                            <div class="attribute-label">Sabedoria</div>
                        </div>
                        
                        <!-- Carisma -->
                        <div class="attribute-card">
                            <div class="attribute-icon icon-carisma">
                                <i class="fas fa-comment-dots"></i>
                            </div>
                            <div class="attribute-value" id="display-carisma">0</div>
                            <div class="attribute-label">Carisma</div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4 text-muted">
                        Total de pontos: <span class="font-bold" id="total-atributos">0</span>
                    </div>
                </section>
                
                <!-- Recursos Vitais -->
                <section class="anim-entry delay-3">
                    <h2 class="text-xl font-bold mb-4">
                        <i class="fas fa-heartbeat mr-2"></i>
                        Recursos Vitais
                    </h2>
                    
                    <div class="resources-grid">
                        <!-- Vida -->
                        <div class="resource-card resource-vital">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-heart text-red-400"></i>
                                    <span class="font-semibold">Vida</span>
                                </div>
                                <span class="font-mono text-lg" id="display-vida">0/0</span>
                            </div>
                            
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" id="vida-bar" style="background: linear-gradient(90deg, var(--theme-red), #f87171);"></div>
                            </div>
                            
                            <div class="text-sm text-muted flex justify-between">
                                <span>Base: <span id="vida-base">0</span></span>
                                <span id="vida-percent">0%</span>
                            </div>
                        </div>
                        
                        <!-- Mana -->
                        <div class="resource-card resource-energy">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-bolt text-blue-400"></i>
                                    <span class="font-semibold">Mana</span>
                                </div>
                                <span class="font-mono text-lg" id="display-mana">0/0</span>
                            </div>
                            
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" id="mana-bar" style="background: linear-gradient(90deg, var(--theme-blue), #60a5fa);"></div>
                            </div>
                            
                            <div class="text-sm text-muted flex justify-between">
                                <span>Base: <span id="mana-base">0</span></span>
                                <span id="mana-percent">0%</span>
                            </div>
                        </div>
                        
                        <!-- Estamina -->
                        <div class="resource-card resource-stamina">
                            <div class="flex items-center justify-between mb-3">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-running text-green-400"></i>
                                    <span class="font-semibold">Estamina</span>
                                </div>
                                <span class="font-mono text-lg" id="display-estamina">0/0</span>
                            </div>
                            
                            <div class="progress-bar mb-2">
                                <div class="progress-fill" id="estamina-bar" style="background: linear-gradient(90deg, var(--theme-green), #4ade80);"></div>
                            </div>
                            
                            <div class="text-sm text-muted flex justify-between">
                                <span>Base: <span id="estamina-base">0</span></span>
                                <span id="estamina-percent">0%</span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Estatísticas Avançadas -->
                <section class="anim-entry delay-4">
                    <h2 class="text-xl font-bold mb-4">
                        <i class="fas fa-chart-bar mr-2"></i>
                        Estatísticas Avançadas
                    </h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="display-blindagem">0</div>
                            <div class="stat-label">Blindagem</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="display-velocidade">0</div>
                            <div class="stat-label">Velocidade</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="display-iniciativa">0</div>
                            <div class="stat-label">Iniciativa</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-value" id="display-percepcao">0</div>
                            <div class="stat-label">Percepção</div>
                        </div>
                    </div>
                </section>
                
                <!-- Destino e Sorte -->
                <section class="character-card anim-entry delay-4">
                    <h2 class="text-xl font-bold mb-4">
                        <i class="fas fa-clover mr-2"></i>
                        Destino e Sorte
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="text-center">
                            <div class="text-5xl font-bold text-purple-400 mb-2" id="display-sorte">0%</div>
                            <div class="text-sm text-muted mb-4">Índice de Sorte</div>
                            
                            <div class="progress-bar mb-3">
                                <div class="progress-fill" id="sorte-bar" style="background: linear-gradient(90deg, var(--theme-purple), var(--theme-pink));"></div>
                            </div>
                            
                            <div class="flex justify-between text-xs text-muted">
                                <span>Azar</span>
                                <span>Neutro</span>
                                <span>Sorte</span>
                            </div>
                        </div>
                        
                        <div>
                            <div class="grid grid-cols-3 gap-4 mb-4">
                                <div class="text-center">
                                    <div class="text-2xl font-bold bg-purple-900/30 p-3 rounded-lg" id="display-dado1">0</div>
                                    <div class="text-xs text-muted mt-1">Fé</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold bg-purple-900/30 p-3 rounded-lg" id="display-dado2">0</div>
                                    <div class="text-xs text-muted mt-1">Sorte</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold bg-purple-900/30 p-3 rounded-lg" id="display-dado3">0</div>
                                    <div class="text-xs text-muted mt-1">Destino</div>
                                </div>
                            </div>
                            
                            <div class="text-sm text-muted">
                                <div class="font-mono bg-gray-900/50 p-3 rounded">
                                    <div id="destiny-formula">((Fé + Destino) × 2 - Sorte) ÷ 2</div>
                                    <div class="mt-2 text-green-400" id="destiny-calc">= 0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="text-sm text-muted mb-2">Interpretação do Destino</div>
                        <div id="destiny-interpretation" class="text-gray-300 italic">
                            Seu destino ainda não foi revelado...
                        </div>
                    </div>
                </section>
                
                <!-- Mascote Companheiro -->
                <section class="mascote-card anim-entry delay-4">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold">
                            <i class="fas fa-paw mr-2"></i>
                            Mascote Companheiro
                        </h2>
                        <button class="btn btn-outline btn-sm" onclick="window.location.href='mascote.html'">
                            <i class="fas fa-edit"></i>
                            Gerenciar
                        </button>
                    </div>
                    
                    <div id="mascote-summary">
                        <!-- Conteúdo será carregado dinamicamente -->
                        <div class="text-center py-8">
                            <i class="fas fa-paw text-4xl text-gray-600 mb-3"></i>
                            <p class="text-gray-500">Nenhum mascote vinculado</p>
                            <button class="btn btn-primary mt-3" onclick="window.location.href='mascote.html'">
                                <i class="fas fa-plus mr-2"></i>
                                Criar Mascote
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- Botões de Ação -->
                <div class="flex flex-wrap justify-end gap-4 mt-6 anim-entry delay-4">
                    <button class="btn btn-primary" onclick="saveProfile()">
                        <i class="fas fa-save mr-2"></i>
                        Salvar Perfil
                    </button>
                    <button class="btn btn-outline" onclick="exportProfile()">
                        <i class="fas fa-download mr-2"></i>
                        Exportar Perfil
                    </button>
                    <button class="btn btn-success" onclick="loadProfile()">
                        <i class="fas fa-upload mr-2"></i>
                        Carregar Save
                    </button>
                    <button class="btn btn-danger" onclick="refreshProfile()">
                        <i class="fas fa-sync-alt mr-2"></i>
                        Atualizar
                    </button>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Script do Sistema de Save -->
    <script>
        // ====================================================================
        // SISTEMA DE SAVE INTEGRADO
        // ====================================================================
        
        class ProfileSaveSystem {
            constructor() {
                this.saveSystem = window.SaveSystem;
                this.currentProfile = null;
                this.notificationQueue = [];
            }
            
            // Carregar perfil do sistema de save
            async loadProfile() {
                try {
                    if (!this.saveSystem) {
                        console.warn('Sistema de Save não encontrado');
                        this.loadFromLocalStorage();
                        return;
                    }
                    
                    // Buscar último save do personagem
                    const saves = this.saveSystem.localSaves || [];
                    const characterSaves = saves.filter(s => s.type === 'character');
                    
                    if (characterSaves.length > 0) {
                        const latestSave = characterSaves[0]; // Mais recente
                        const data = JSON.parse(latestSave.content);
                        this.currentProfile = data;
                        
                        this.updateDisplay();
                        this.showNotification(`Perfil "${latestSave.name}" carregado!`, 'success');
                        return true;
                    } else {
                        this.showNotification('Nenhum save encontrado', 'warning');
                        this.loadFromLocalStorage();
                        return false;
                    }
                    
                } catch (error) {
                    console.error('Erro ao carregar perfil:', error);
                    this.loadFromLocalStorage();
                    this.showNotification('Erro ao carregar perfil', 'error');
                    return false;
                }
            }
            
            // Carregar do localStorage como fallback
            loadFromLocalStorage() {
                try {
                    const saved = localStorage.getItem('grimorio_profile_data');
                    if (saved) {
                        this.currentProfile = JSON.parse(saved);
                        this.updateDisplay();
                        this.showNotification('Perfil carregado do cache', 'info');
                        return true;
                    }
                    return false;
                } catch (error) {
                    console.error('Erro ao carregar do cache:', error);
                    return false;
                }
            }
            
            // Salvar perfil no sistema
            async saveProfile() {
                if (!this.currentProfile) {
                    this.showNotification('Nenhum perfil para salvar', 'warning');
                    return false;
                }
                
                try {
                    const profileName = this.currentProfile.character?.name || 'Personagem';
                    const saveData = {
                        ...this.currentProfile,
                        saveDate: new Date().toISOString(),
                        version: '3.0.0',
                        type: 'profile_export'
                    };
                    
                    // Salvar no sistema principal
                    if (this.saveSystem) {
                        const save = this.saveSystem.createSave(profileName, saveData, 'character');
                        this.showNotification(`Perfil salvo: "${save.name}"`, 'success');
                        return save;
                    } else {
                        // Fallback para localStorage
                        localStorage.setItem('grimorio_profile_data', JSON.stringify(saveData));
                        this.showNotification('Perfil salvo no cache', 'success');
                        return true;
                    }
                    
                } catch (error) {
                    console.error('Erro ao salvar perfil:', error);
                    this.showNotification('Erro ao salvar perfil', 'error');
                    return false;
                }
            }
            
            // Exportar perfil como arquivo
            exportProfile() {
                if (!this.currentProfile) {
                    this.showNotification('Nenhum perfil para exportar', 'warning');
                    return false;
                }
                
                try {
                    const exportData = {
                        ...this.currentProfile,
                        exportDate: new Date().toISOString(),
                        version: '3.0.0',
                        type: 'profile_export'
                    };
                    
                    const dataStr = JSON.stringify(exportData, null, 2);
                    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
                    
                    const fileName = `perfil_${this.currentProfile.character?.name || 'personagem'}_${Date.now()}.json`;
                    
                    const link = document.createElement('a');
                    link.setAttribute('href', dataUri);
                    link.setAttribute('download', fileName);
                    link.click();
                    
                    this.showNotification('Perfil exportado com sucesso!', 'success');
                    return true;
                    
                } catch (error) {
                    console.error('Erro ao exportar perfil:', error);
                    this.showNotification('Erro ao exportar perfil', 'error');
                    return false;
                }
            }
            
            // Atualizar display com dados do perfil
            updateDisplay() {
                if (!this.currentProfile) return;
                
                const profile = this.currentProfile;
                const character = profile.character || profile.dados || profile;
                
                // Informações básicas
                document.getElementById('profile-name').textContent = character.name || 'Personagem';
                document.getElementById('display-nome').textContent = character.name || '-';
                document.getElementById('display-raca').textContent = character.raca || character.race || '-';
                document.getElementById('display-classe').textContent = character.classe || character.class || '-';
                document.getElementById('display-origem').textContent = character.origem || character.origin || '-';
                document.getElementById('display-idade').textContent = character.idade || character.age || '-';
                
                // Atributos
                const atributos = character.atributos || character.attributes || character;
                document.getElementById('display-forca').textContent = atributos.forca || atributos.str || atributos.FOR || '0';
                document.getElementById('display-destreza').textContent = atributos.destreza || atributos.dex || atributos.DEX || '0';
                document.getElementById('display-constituicao').textContent = atributos.constituicao || atributos.con || atributos.CON || '0';
                document.getElementById('display-inteligencia').textContent = atributos.inteligencia || atributos.int || atributos.INT || '0';
                document.getElementById('display-sabedoria').textContent = atributos.sabedoria || atributos.wis || atributos.WIS || '0';
                document.getElementById('display-carisma').textContent = atributos.carisma || atributos.cha || atributos.CHA || '0';
                
                // Calcular total
                const total = Object.values({
                    forca: parseInt(atributos.forca || atributos.str || 0),
                    destreza: parseInt(atributos.destreza || atributos.dex || 0),
                    constituicao: parseInt(atributos.constituicao || atributos.con || 0),
                    inteligencia: parseInt(atributos.inteligencia || atributos.int || 0),
                    sabedoria: parseInt(atributos.sabedoria || atributos.wis || 0),
                    carisma: parseInt(atributos.carisma || atributos.cha || 0)
                }).reduce((a, b) => a + b, 0);
                
                document.getElementById('total-atributos').textContent = total;
                
                // Nível e XP
                const progressao = character.progressao || character.progression || {};
                const nivel = parseInt(progressao.nivel || character.level || 1);
                const xp = parseInt(progressao.xp_atual || progressao.xp || character.experience || 0);
                const xpProximo = 1000; // Padrão
                
                document.getElementById('display-nivel').textContent = nivel;
                document.getElementById('mini-level').textContent = nivel;
                document.getElementById('display-xp').textContent = `${xp}/${xpProximo}`;
                document.getElementById('mini-xp').textContent = xp;
                
                const xpPercent = Math.min(100, (xp / xpProximo) * 100);
                document.getElementById('xp-bar').style.width = `${xpPercent}%`;
                
                // Recursos
                const recursos = character.recursos || character.resources || {};
                const vidaMax = parseInt(recursos.vida_max || recursos.hp_max || 10);
                const vidaAtual = parseInt(recursos.vida_atual || recursos.hp_current || vidaMax);
                const manaMax = parseInt(recursos.mana_max || recursos.mp_max || 10);
                const manaAtual = parseInt(recursos.mana_atual || recursos.mp_current || manaMax);
                const estaminaMax = parseInt(recursos.estamina_max || recursos.sp_max || 20);
                const estaminaAtual = parseInt(recursos.estamina_atual || recursos.sp_current || estaminaMax);
                
                // Vida
                document.getElementById('display-vida').textContent = `${vidaAtual}/${vidaMax}`;
                document.getElementById('vida-base').textContent = recursos.vida_base || vidaMax;
                document.getElementById('vida-bar').style.width = `${(vidaAtual / vidaMax) * 100}%`;
                document.getElementById('vida-percent').textContent = `${Math.round((vidaAtual / vidaMax) * 100)}%`;
                
                // Mana
                document.getElementById('display-mana').textContent = `${manaAtual}/${manaMax}`;
                document.getElementById('mana-base').textContent = recursos.mana_base || manaMax;
                document.getElementById('mana-bar').style.width = `${(manaAtual / manaMax) * 100}%`;
                document.getElementById('mana-percent').textContent = `${Math.round((manaAtual / manaMax) * 100)}%`;
                
                // Estamina
                document.getElementById('display-estamina').textContent = `${estaminaAtual}/${estaminaMax}`;
                document.getElementById('estamina-base').textContent = recursos.estamina_base || estaminaMax;
                document.getElementById('estamina-bar').style.width = `${(estaminaAtual / estaminaMax) * 100}%`;
                document.getElementById('estamina-percent').textContent = `${Math.round((estaminaAtual / estaminaMax) * 100)}%`;
                
                // Destino
                const destino = character.destino || character.fate || {};
                const sorte = destino.valor || destiny.value || 50;
                document.getElementById('display-sorte').textContent = `${sorte}%`;
                document.getElementById('sorte-bar').style.width = `${sorte}%`;
                
                // Dados do destino
                const dados = destino.dados || destiny.dice || [10, 10, 10];
                document.getElementById('display-dado1').textContent = dados[0] || 0;
                document.getElementById('display-dado2').textContent = dados[1] || 0;
                document.getElementById('display-dado3').textContent = dados[2] || 0;
                
                // Fórmula
                const calc = ((dados[0] + dados[2]) * 2 - dados[1]) / 2;
                document.getElementById('destiny-calc').textContent = `= ${Math.round(calc)}`;
                
                // Interpretação
                this.updateDestinyInterpretation(sorte);
                
                // Estatísticas derivadas
                this.calculateDerivedStats(atributos);
                
                // Atualizar sidebar
                document.getElementById('mini-class').textContent = character.classe || character.class || '-';
                document.getElementById('mini-race').textContent = character.raca || character.race || '-';
            }
            
            // Calcular estatísticas derivadas
            calculateDerivedStats(atributos) {
                const forca = parseInt(atributos.forca || 0);
                const destreza = parseInt(atributos.destreza || 0);
                const constituicao = parseInt(atributos.constituicao || 0);
                const inteligencia = parseInt(atributos.inteligencia || 0);
                const sabedoria = parseInt(atributos.sabedoria || 0);
                
                // Fórmulas simplificadas
                const blindagem = Math.floor(constituicao * 1.5 + forca * 0.5);
                const velocidade = Math.floor(destreza * 2 + constituicao * 0.5);
                const iniciativa = Math.floor(destreza + inteligencia);
                const percepcao = Math.floor(sabedoria * 1.5 + inteligencia * 0.5);
                
                document.getElementById('display-blindagem').textContent = blindagem;
                document.getElementById('display-velocidade').textContent = velocidade;
                document.getElementById('display-iniciativa').textContent = iniciativa;
                document.getElementById('display-percepcao').textContent = percepcao;
            }
            
            // Atualizar interpretação do destino
            updateDestinyInterpretation(sorte) {
                const element = document.getElementById('destiny-interpretation');
                if (!element) return;
                
                let text = '';
                let color = 'text-gray-300';
                
                if (sorte >= 90) {
                    text = '✨ DESTINO GLORIOSO! Os deuses sorriem para você. Grandes oportunidades surgirão em seu caminho.';
                    color = 'text-yellow-300';
                } else if (sorte >= 75) {
                    text = '🎲 Sorte excelente! O vento sopra a seu favor. Momentos oportunos surgirão em sua jornada.';
                    color = 'text-green-300';
                } else if (sorte >= 60) {
                    text = '🍀 Fortuna favorável. As probabilidades estão do seu lado na maioria dos desafios.';
                    color = 'text-green-400';
                } else if (sorte >= 40) {
                    text = '⚖️ Destino equilibrado. Seu caminho é uma mistura de altos e baixos, como a maioria.';
                    color = 'text-blue-300';
                } else if (sorte >= 25) {
                    text = '🌘 Sorte abaixo da média. Cuidado com decisões arriscadas - a prudência será sua aliada.';
                    color = 'text-orange-300';
                } else if (sorte >= 1) {
                    text = '🌑 Sorte crítica. O destino testará sua resiliência. Grandes recompensas exigem grandes esforços.';
                    color = 'text-red-300';
                } else {
                    text = '🎭 Seu destino ainda não foi revelado. Role os dados para descobrir seu caminho.';
                    color = 'text-gray-400';
                }
                
                element.innerHTML = `<span class="${color}">${text}</span>`;
            }
            
            // Mostrar notificação
            showNotification(message, type = 'info') {
                // Criar elemento de notificação
                const notification = document.createElement('div');
                notification.className = `notification fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg border-l-4 ${
                    type === 'success' ? 'bg-green-900/30 border-green-500 text-green-300' :
                    type === 'warning' ? 'bg-yellow-900/30 border-yellow-500 text-yellow-300' :
                    type === 'error' ? 'bg-red-900/30 border-red-500 text-red-300' :
                    'bg-blue-900/30 border-blue-500 text-blue-300'
                }`;
                
                notification.innerHTML = `
                    <div class="flex items-center gap-2">
                        <i class="fas fa-${
                            type === 'success' ? 'check-circle' :
                            type === 'warning' ? 'exclamation-triangle' :
                            type === 'error' ? 'times-circle' : 'info-circle'
                        }"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                // Adicionar ao body
                document.body.appendChild(notification);
                
                // Remover após 3 segundos
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            
            // Criar perfil de exemplo
            createExampleProfile() {
                this.currentProfile = {
                    character: {
                        name: "Aragorn, o Herdeiro",
                        raca: "Humano",
                        classe: "Ranger",
                        origem: "Rei no Exílio",
                        idade: "87",
                        atributos: {
                            forca: 18,
                            destreza: 16,
                            constituicao: 17,
                            inteligencia: 14,
                            sabedoria: 15,
                            carisma: 13
                        },
                        recursos: {
                            vida_max: 85,
                            vida_atual: 85,
                            vida_base: 85,
                            mana_max: 20,
                            mana_atual: 20,
                            mana_base: 20,
                            estamina_max: 45,
                            estamina_atual: 45,
                            estamina_base: 45
                        },
                        progressao: {
                            nivel: 5,
                            xp_atual: 3200
                        },
                        destino: {
                            valor: 72,
                            dados: [15, 8, 18],
                            fixada: false
                        }
                    },
                    mascote: {
                        nome: "Brego",
                        tipoNome: "Cavalo Nobre",
                        tipoIcone: "horse",
                        tipoCor: "#d4a76a",
                        nivel: 3,
                        lealdade: 95
                    },
                    saveDate: new Date().toISOString(),
                    version: '3.0.0'
                };
                
                this.updateDisplay();
                this.showNotification('Perfil de exemplo criado!', 'success');
            }
        }
        
        // ====================================================================
        // INICIALIZAÇÃO E FUNÇÕES GLOBAIS
        // ====================================================================
        
        let profileSystem = null;
        
        function initProfileSystem() {
            profileSystem = new ProfileSaveSystem();
            
            // Tentar carregar perfil automaticamente
            setTimeout(() => {
                const loaded = profileSystem.loadProfile();
                if (!loaded) {
                    // Criar perfil de exemplo se não encontrar saves
                    profileSystem.createExampleProfile();
                }
            }, 500);
        }
        
        // Funções globais para uso nos botões
        function goToIndex() {
            window.location.href = 'index.html';
        }
        
        function goToFicha() {
            window.location.href = 'ficha.html';
        }
        
        function saveProfile() {
            if (profileSystem) {
                profileSystem.saveProfile();
            } else {
                alert('Sistema não inicializado');
            }
        }
        
        function loadProfile() {
            if (profileSystem) {
                profileSystem.loadProfile();
            } else {
                alert('Sistema não inicializado');
            }
        }
        
        function exportProfile() {
            if (profileSystem) {
                profileSystem.exportProfile();
            } else {
                alert('Sistema não inicializado');
            }
        }
        
        function refreshProfile() {
            if (profileSystem) {
                profileSystem.loadProfile();
            } else {
                alert('Sistema não inicializado');
            }
        }
        
        // Inicializar quando a página carregar
        window.addEventListener('load', initProfileSystem);
        
        // Expor para o console para debug
        window.ProfileSystem = profileSystem;
    </script>
</body>
</html>