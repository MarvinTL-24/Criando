<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grimório Digital - Escolha de Classe</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        cinzel: ['Cinzel', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        theme: {
                            bg: '#0a0a0c',
                            panel: '#0f0f12',
                            border: '#2a2a2e',
                            text: '#e8e4dc',
                            blue: '#4a9eff',
                            orange: '#ff6b35',
                            purple: '#8b5cf6',
                            red: '#dc2626',
                            green: '#22c55e',
                            yellow: '#f59e0b'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0a0a0c; color: #e8e4dc; }
        
        /* Animações */
        .anim-entry {
            animation: fadeInUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        
        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Card com efeito de seleção */
        .class-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .class-card:hover {
            transform: translateY(-5px);
        }
        
        .class-card.selected {
            border-color: #4a9eff;
            box-shadow: 0 0 20px rgba(74, 158, 255, 0.3);
        }
    </style>
</head>
<body class="min-h-screen font-sans">

    <!-- Barra de Navegação Simples -->
    <nav class="w-full bg-[#0f0f12]/95 backdrop-blur-sm border-b border-theme-border sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-4">
                    <a href="index.html" class="flex items-center gap-2 text-theme-text hover:text-theme-blue transition-colors">
                        <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        <span class="font-cinzel font-semibold">Voltar ao Hub</span>
                    </a>
                </div>
                
                <div class="flex items-center gap-4">
                    <span class="font-cinzel text-lg font-bold text-theme-blue">Escolha de Classe</span>
                </div>
                
                <div class="flex items-center gap-3">
                    <button onclick="salvarESair()" id="btn-confirmar" 
                            class="px-4 py-2 bg-theme-blue text-white rounded-lg font-semibold hover:bg-blue-600 transition-colors opacity-0">
                        Confirmar Classe
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        
        <!-- Cabeçalho -->
        <div class="text-center mb-12 anim-entry">
            <h1 class="font-cinzel text-4xl font-bold text-white mb-4">Escolha sua Classe</h1>
            <p class="text-gray-400 max-w-2xl mx-auto">
                Sua classe define seu papel no mundo. Escolha sabiamente, pois ela afeta seus atributos, habilidades e estilo de jogo.
            </p>
            <div class="w-32 h-[2px] bg-gradient-to-r from-transparent via-theme-blue to-transparent mx-auto mt-6"></div>
        </div>
        
        <!-- Classes Padrão -->
        <section class="mb-12 anim-entry" style="animation-delay: 0.1s;">
            <h2 class="font-cinzel text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <i data-lucide="shield" class="w-6 h-6 text-theme-blue"></i>
                Classes Principais
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <!-- Guerreiro -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Guerreiro')" data-classe="guerreiro">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-red-900/20 border border-red-800">
                            <i data-lucide="sword" class="w-6 h-6 text-red-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-red-900/30 text-red-400 text-xs rounded-full border border-red-800">
                            Dano/Tanque
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Guerreiro</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Mestre do combate corpo a corpo. Alta resistência e dano físico.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Força</span>
                            <span class="font-bold text-red-400">+4</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Constituição</span>
                            <span class="font-bold text-red-400">+3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Mago -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Mago')" data-classe="mago">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-blue-900/20 border border-blue-800">
                            <i data-lucide="sparkles" class="w-6 h-6 text-blue-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-blue-900/30 text-blue-400 text-xs rounded-full border border-blue-800">
                            Dano Mágico
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Mago</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Estudioso das artes arcanas. Poder mágico devastador.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Inteligência</span>
                            <span class="font-bold text-blue-400">+5</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Sabedoria</span>
                            <span class="font-bold text-blue-400">+3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Arqueiro -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Arqueiro')" data-classe="arqueiro">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-green-900/20 border border-green-800">
                            <i data-lucide="target" class="w-6 h-6 text-green-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-green-900/30 text-green-400 text-xs rounded-full border border-green-800">
                            Dano à Distância
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Arqueiro</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Especialista em ataques à distância. Precisão letal e mobilidade.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Destreza</span>
                            <span class="font-bold text-green-400">+5</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Percepção</span>
                            <span class="font-bold text-green-400">+3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Clérigo -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Clérigo')" data-classe="clerigo">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-yellow-900/20 border border-yellow-800">
                            <i data-lucide="heart" class="w-6 h-6 text-yellow-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-yellow-900/30 text-yellow-400 text-xs rounded-full border border-yellow-800">
                            Suporte/Cura
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Clérigo</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Servo divino. Cura aliados e usa magias de proteção.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Sabedoria</span>
                            <span class="font-bold text-yellow-400">+5</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Carisma</span>
                            <span class="font-bold text-yellow-400">+3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Ladino -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Ladino')" data-classe="ladino">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-purple-900/20 border border-purple-800">
                            <i data-lucide="ghost" class="w-6 h-6 text-purple-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-purple-900/30 text-purple-400 text-xs rounded-full border border-purple-800">
                            Furtividade/Utilidade
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Ladino</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Mestre da furtividade. Especialista em ataques furtivos e habilidades sociais.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Destreza</span>
                            <span class="font-bold text-purple-400">+4</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Inteligência</span>
                            <span class="font-bold text-purple-400">+3</span>
                        </div>
                    </div>
                </div>
                
                <!-- Bárbaro -->
                <div class="class-card bg-theme-panel border border-theme-border p-6 rounded-lg cursor-pointer" 
                     onclick="selecionarClasse('Bárbaro')" data-classe="barbaro">
                    <div class="flex items-start justify-between mb-4">
                        <div class="p-3 rounded-lg bg-orange-900/20 border border-orange-800">
                            <i data-lucide="zap" class="w-6 h-6 text-orange-400"></i>
                        </div>
                        <span class="px-3 py-1 bg-orange-900/30 text-orange-400 text-xs rounded-full border border-orange-800">
                            Dano/Fúria
                        </span>
                    </div>
                    
                    <h3 class="font-cinzel text-xl font-bold text-white mb-2">Bárbaro</h3>
                    <p class="text-gray-400 text-sm mb-4">
                        Guerreiro feroz que entra em fúria. Dano massivo e resistência sobre-humana.
                    </p>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Força</span>
                            <span class="font-bold text-orange-400">+5</span>
                        </div>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-gray-400">Constituição</span>
                            <span class="font-bold text-orange-400">+4</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Classe Atualmente Selecionada -->
        <section class="bg-theme-panel border border-theme-border p-6 rounded-lg mb-8 anim-entry" style="animation-delay: 0.2s;">
            <h2 class="font-cinzel text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <i data-lucide="check-circle" class="w-6 h-6 text-theme-green"></i>
                Classe Selecionada
            </h2>
            
            <div id="selected-class-container" class="text-center py-8 border-2 border-dashed border-theme-border rounded-lg">
                <i data-lucide="swords" class="w-16 h-16 mx-auto mb-4 text-gray-600"></i>
                <p class="text-gray-500 mb-2">Nenhuma classe selecionada</p>
                <p class="text-sm text-gray-600">Clique em uma classe acima para selecionar</p>
            </div>
            
            <div id="class-details" class="hidden">
                <!-- Detalhes serão preenchidos por JavaScript -->
            </div>
        </section>
        
        <!-- Ações -->
        <div class="flex flex-col md:flex-row gap-4 justify-center anim-entry" style="animation-delay: 0.3s;">
            <button onclick="window.location.href='index.html'" 
                    class="px-6 py-3 border border-theme-border rounded-lg text-white hover:bg-white/5 transition-colors">
                <i data-lucide="x" class="w-4 h-4 inline mr-2"></i>
                Cancelar
            </button>
            <button onclick="salvarESair()" id="btn-confirmar-final" 
                    class="px-6 py-3 bg-gradient-to-r from-theme-blue to-blue-700 rounded-lg text-white font-semibold hover:opacity-90 transition-opacity opacity-50 cursor-not-allowed">
                <i data-lucide="check" class="w-4 h-4 inline mr-2"></i>
                Confirmar e Salvar
            </button>
        </div>
    </main>

    <script>
        // ====================================================================
        // SISTEMA SIMPLIFICADO DE ESCOLHA DE CLASSE
        // ====================================================================
        
        // Inicializar ícones
        if (window.lucide) {
            lucide.createIcons();
        }
        
        // Variáveis do sistema
        let classeSelecionada = null;
        let dadosPersonagem = null;
        const CHAVE_ARMAZENAMENTO = 'personagemSalvo';
        
        // Inicializar sistema
        function inicializarSistema() {
            carregarPersonagem();
            verificarClasseAtual();
        }
        
        function carregarPersonagem() {
            const dados = localStorage.getItem(CHAVE_ARMAZENAMENTO);
            if (dados) {
                dadosPersonagem = JSON.parse(dados);
            } else {
                // Se não existir, criar dados básicos
                dadosPersonagem = {
                    'inp-nome': 'Novo Personagem',
                    'inp-classe': 'Não Definida',
                    'inp-raca': 'Humano',
                    'inp-titulo': 'Aventureiro',
                    atributos: {
                        forca: 0,
                        destreza: 0,
                        constituicao: 0,
                        inteligencia: 0,
                        sabedoria: 0,
                        carisma: 0
                    },
                    ultimaAtualizacao: new Date().toISOString()
                };
                localStorage.setItem(CHAVE_ARMAZENAMENTO, JSON.stringify(dadosPersonagem));
            }
        }
        
        function verificarClasseAtual() {
            if (dadosPersonagem && dadosPersonagem['inp-classe'] && dadosPersonagem['inp-classe'] !== 'Não Definida') {
                // Se já tem classe definida, mostrá-la
                const classeNome = dadosPersonagem['inp-classe'];
                selecionarClasse(classeNome, true);
            }
        }
        
        // Selecionar classe
        function selecionarClasse(nomeClasse, naoAtualizarUI = false) {
            classeSelecionada = nomeClasse;
            
            if (!naoAtualizarUI) {
                atualizarUI();
            }
            
            // Habilitar botão de confirmação
            document.getElementById('btn-confirmar').style.opacity = '1';
            document.getElementById('btn-confirmar-final').style.opacity = '1';
            document.getElementById('btn-confirmar-final').classList.remove('cursor-not-allowed');
            document.getElementById('btn-confirmar-final').classList.add('cursor-pointer');
        }
        
        function atualizarUI() {
            // Remover seleção de todas as classes
            document.querySelectorAll('.class-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Adicionar seleção à classe clicada
            const cardSelecionado = document.querySelector(`[data-classe="${classeSelecionada.toLowerCase()}"]`);
            if (cardSelecionado) {
                cardSelecionado.classList.add('selected');
            }
            
            // Atualizar painel de classe selecionada
            atualizarPainelSelecionado();
        }
        
        function atualizarPainelSelecionado() {
            const container = document.getElementById('selected-class-container');
            const details = document.getElementById('class-details');
            
            if (!classeSelecionada) {
                container.innerHTML = `
                    <i data-lucide="swords" class="w-16 h-16 mx-auto mb-4 text-gray-600"></i>
                    <p class="text-gray-500 mb-2">Nenhuma classe selecionada</p>
                    <p class="text-sm text-gray-600">Clique em uma classe acima para selecionar</p>
                `;
                container.classList.remove('hidden');
                details.classList.add('hidden');
                return;
            }
            
            // Informações das classes
            const classesInfo = {
                'Guerreiro': {
                    cor: '#dc2626',
                    icone: 'sword',
                    descricao: 'Especialista em combate corpo a corpo com alta resistência.',
                    atributos: { forca: 4, destreza: 2, constituicao: 4, inteligencia: 1, sabedoria: 2, carisma: 2 }
                },
                'Mago': {
                    cor: '#4a9eff',
                    icone: 'sparkles',
                    descricao: 'Mestre das artes arcanas com poder mágico devastador.',
                    atributos: { forca: 1, destreza: 2, constituicao: 2, inteligencia: 5, sabedoria: 4, carisma: 3 }
                },
                'Arqueiro': {
                    cor: '#22c55e',
                    icone: 'target',
                    descricao: 'Especialista em ataques à distância com precisão letal.',
                    atributos: { forca: 2, destreza: 5, constituicao: 3, inteligencia: 3, sabedoria: 3, carisma: 2 }
                },
                'Clérigo': {
                    cor: '#f59e0b',
                    icone: 'heart',
                    descricao: 'Servo divino com habilidades de cura e proteção.',
                    atributos: { forca: 2, destreza: 2, constituicao: 3, inteligencia: 3, sabedoria: 5, carisma: 3 }
                },
                'Ladino': {
                    cor: '#8b5cf6',
                    icone: 'ghost',
                    descricao: 'Mestre da furtividade e habilidades sociais.',
                    atributos: { forca: 2, destreza: 4, constituicao: 2, inteligencia: 4, sabedoria: 2, carisma: 4 }
                },
                'Bárbaro': {
                    cor: '#ea580c',
                    icone: 'zap',
                    descricao: 'Guerreiro feroz que entra em fúria no combate.',
                    atributos: { forca: 5, destreza: 2, constituicao: 4, inteligencia: 1, sabedoria: 2, carisma: 2 }
                }
            };
            
            const info = classesInfo[classeSelecionada] || classesInfo['Guerreiro'];
            
            container.classList.add('hidden');
            details.classList.remove('hidden');
            
            details.innerHTML = `
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <div class="flex items-center gap-4 mb-4">
                            <div class="p-3 rounded-lg" style="background: ${info.cor}20; border-color: ${info.cor}80; border-width: 1px">
                                <i data-lucide="${info.icone}" style="color: ${info.cor}" class="w-8 h-8"></i>
                            </div>
                            <div>
                                <h3 class="font-cinzel text-2xl font-bold text-white">${classeSelecionada}</h3>
                                <p class="text-gray-400">Classe selecionada</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-6">${info.descricao}</p>
                        
                        <div class="space-y-2">
                            <h4 class="font-semibold text-white">Bônus de Atributos</h4>
                            ${Object.entries(info.atributos).map(([attr, valor]) => `
                                <div class="flex items-center justify-between py-2 border-b border-theme-border">
                                    <span class="text-gray-400 capitalize">${attr}</span>
                                    <span class="font-bold" style="color: ${info.cor}">+${valor}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-white mb-4">Efeitos na Ficha</h4>
                        <ul class="space-y-3">
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"></i>
                                <span class="text-gray-300">A classe será salva automaticamente na sua ficha</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"></i>
                                <span class="text-gray-300">O hub principal será atualizado em tempo real</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"></i>
                                <span class="text-gray-300">Você poderá mudar a classe a qualquer momento</span>
                            </li>
                        </ul>
                        
                        <div class="mt-6 p-4 rounded-lg bg-theme-bg border border-theme-border">
                            <h5 class="font-semibold text-white mb-2">Próximos Passos</h5>
                            <p class="text-sm text-gray-400">
                                Após confirmar, vá para a página de <a href="status.html" class="text-theme-blue hover:underline">Status</a> 
                                para distribuir pontos de atributos ou <a href="ficha.html" class="text-theme-blue hover:underline">Ficha</a> 
                                para completar suas informações.
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            // Atualizar ícones
            if (window.lucide) {
                lucide.createIcons();
            }
        }
        
        // Salvar e sair
        function salvarESair() {
            if (!classeSelecionada) {
                alert('Por favor, selecione uma classe antes de confirmar.');
                return;
            }
            
            // Atualizar dados do personagem
            if (!dadosPersonagem) {
                carregarPersonagem();
            }
            
            dadosPersonagem['inp-classe'] = classeSelecionada;
            dadosPersonagem.ultimaAtualizacao = new Date().toISOString();
            
            // Salvar no localStorage
            localStorage.setItem(CHAVE_ARMAZENAMENTO, JSON.stringify(dadosPersonagem));
            
            // Feedback visual
            mostrarFeedbackSucesso();
            
            // Redirecionar após breve delay
            setTimeout(() => {
                window.location.href = 'index.html?classe=' + encodeURIComponent(classeSelecionada);
            }, 1500);
        }
        
        function mostrarFeedbackSucesso() {
            const feedback = document.createElement('div');
            feedback.className = 'fixed top-4 right-4 p-4 bg-green-900/20 border border-green-800 rounded-lg shadow-lg z-50';
            feedback.innerHTML = `
                <div class="flex items-center gap-3">
                    <i data-lucide="check-circle" class="w-5 h-5 text-green-400"></i>
                    <div>
                        <p class="font-semibold text-white">Classe salva com sucesso!</p>
                        <p class="text-sm text-green-300">Redirecionando para o hub...</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(feedback);
            lucide.createIcons();
            
            setTimeout(() => {
                if (feedback.parentElement) {
                    feedback.remove();
                }
            }, 3000);
        }
        
        // Inicializar quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            inicializarSistema();
        });
    </script>
</body>
</html>